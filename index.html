<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Coding Example</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <h1>SQL Challenge</h1>
    <div>       
        <p>This query returns the movie title and year of all movies that feature an actor/s whose name/s match the search, 
            ordered alphabetically by movie title. 
        </p>
        <p>
            In the below examples, Iâ€™ve searched for actors whose last names begins with a W in order to get multiple results. 
            However, this query would be most useful when requesting a list of all of the movies one specific actor has starred in. 
        </p>
        <p>
            For example, WHERE act_fname = 'Ewan' AND act_lname = 'McGregor'.
        </p>
    </div>
    <div>
        <h2>Sub-Query Example</h2>
        <p>For this example, I've used sub-queries because I only need to access one column from each of the additional tables to complete the query.</p>
        <h3>Query</h3>
<pre>
<code>
SELECT mov_title AS title, mov_year AS year
FROM movie
WHERE mov_id IN (
    SELECT mov_id
    FROM movie_cast
    WHERE act_id IN (
        SELECT act_id
        FROM actor
        WHERE act_lname LIKE('W%')))
ORDER BY title ASC;
</code>
</pre>
    </div>

    <div>
        <h3>Output</h3>
        <table>
            <tr>
                <th>title</th>
                <th>year</th>
            </tr>
            <tr>
                <td>Aliens</td>
                <td>1986</td>
            </tr>
            <tr>
                <td>Boogie Nights</td>
                <td>1997</td>
            </tr>
            <tr>
                <td>Good Will Hunting</td>
                <td>1997</td>
            </tr>
            <tr>
                <td>Titanic</td>
                <td>1997</td>
            </tr>
        </table>
    </div>


    <div>
        <h2>Join Example</h2>
        <p>If I want to display additonal data from the actors table, such as the actors first and last names, 
            then joins are needed to access these additional columns.
        </p>
        <h3>Query</h3>
<pre>
<code>
SELECT DISTINCT actor.act_id, movie.mov_title AS title, movie.mov_year AS year, actor.act_fname AS first_name, actor.act_lname AS last_name
FROM movie
INNER JOIN movie_cast
ON movie.mov_id = movie_cast.mov_id
INNER JOIN actor
ON actor.act_id = movie_cast.act_id
WHERE actor.act_lname LIKE('W%') 
ORDER BY title ASC;
</code>
</pre>
    </div>
    <div>
        <h3>Output</h3>
        <table>
            <tr>
                <th>title</th>
                <th>year</th>
                <th>first_name</th>
                <th>last_name</th>
            </tr>
            <tr>
                <td>Aliens</td>
                <td>1986</td>
                <td>Sigourney</td>
                <td>Weaver</td>
            </tr>
            <tr>
                <td>Boogie Nights</td>
                <td>1997</td>
                <td>Mark</td>
                <td>Wahlberg</td>
            </tr>
            <tr>
                <td>Good Will Hunting</td>
                <td>1997</td>
                <td>Robin</td>
                <td>Williams</td>
            </tr>
            <tr>
                <td>Titanic</td>
                <td>1997</td>
                <td>Kate</td>
                <td>Winslet</td>
            </tr>
        </table> 
    </div>
    <br>
    <p> These queries were created using the
        <a href="https://www.w3resource.com/sql-exercises/movie-database-exercise/subqueries-exercises-on-movie-database.php">W3 Resource Movie Database</a> 
    </p> 
</body>
</html>